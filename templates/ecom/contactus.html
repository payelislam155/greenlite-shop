<!DOCTYPE html>
{% load static %}
{% load widget_tweaks %} 
<html lang="en" dir="ltr">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Contact Us - Greenlite Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        .contack-section {
            width: 100%; 
            position: relative;
            top: 81px;
            background: linear-gradient(to right, #4caf50, #2e7d32);
            min-height: 500px; 
            display: flex;
            align-items: center;
        }
        .contack-details{
            position: relative;
            left:70px;
        }
        .contack-form{
            position: relative;
            right: 70px;
        }
        .map-contain{
            position: relative;
            top: 82px;
        }
        .bg-orange { background-color: #fe5f00 !important; }
        .bg-orange:hover { background-color: #e65600 !important; transition: 0.3s; }
        
        .custom-form-input {
            border: none;
            border-radius: 8px !important;
            padding: 12px !important;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        .form-label {
            color: #2e7d32;
            font-weight: 700;
            margin-bottom: 8px;
        }
    </style>
</head>

<body style="background-color: #B3E5FC; overflow-x: hidden;">

    {% if request.user.is_authenticated %}
        {% include "ecom/customer_navbar.html" %}
    {% else %}
        {% include "ecom/navbar.html" %}
    {% endif %}

    <section class="contack-section">
        <div class="container-fluid">
            <div class="row g-4 align-items-center p-4">
                <div class="contack-details col-md-5">
                    <h2 class="display-3 fw-bold mb-3 text-white">Online Support</h2>
                    <p class="fs-5 text-white mb-4">Fill up the form and our Team will get back to you within 24 hours.</p>

                    <div class="mb-4">
                        <p class="text-white fs-6">
                            <i class="fas fa-map-marker-alt text-warning me-3"></i>
                            Barishal, Bhola, Lalmohan
                        </p>
                        <p class="text-white fs-6">
                            <i class="fas fa-envelope text-warning me-3"></i>
                            payelislambangladesh100@gmail.com
                        </p>
                    </div>

                    <button class="btn bg-orange text-white fw-bold px-4 py-2 shadow">
                        <i class="fas fa-phone-alt me-2"></i>+9858754688555
                    </button>
                </div>

                <div class="contack-form col-md-5 offset-md-1">
                    <form id="contactForm" method="POST" class="bg-white p-5 rounded-4 shadow-lg" style="background-color: rgba(255, 255, 255, 0.9) !important;">
                        {% csrf_token %}
                        
                        <h4 class="mb-4 fw-bold" style="color: #2e7d32;">Send a Message</h4>

                        <div class="mb-3">
                            <label class="form-label small">Name and Surname</label>
                            {% render_field form.Name class="form-control custom-form-input" placeholder="Full Name" %}
                        </div>

                        <div class="mb-3">
                            <label class="form-label small">Email Address</label>
                            {% render_field form.Email class="form-control custom-form-input" placeholder="email@example.com" %}
                        </div>

                        <div class="mb-4">
                            <label class="form-label small">Message</label>
                            {% render_field form.Message class="form-control custom-form-input" rows="4" placeholder="How can we help you?" %}
                        </div>

                        <div class="d-grid">
                            <button type="submit" id="submitBtn" class="btn bg-orange text-white rounded-pill py-3 fw-bold fs-5 shadow-sm">
                                Send Message <i class="fas fa-paper-plane ms-2"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <section class="map-contain w-100" style="height:420px;">
        <iframe class="w-100 h-100"
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d118147.6820202206!2d90.3113115!3d22.3484831!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30aaca198f1f7d63%3A0xc0688f341103c812!2sLalmohan!5e0!3m2!1sen!2sbd!4v1714856000000!5m2!1sen!2sbd" 
                loading="lazy"></iframe>
    </section>

    <div class="mt-5 pt-5">
        {% include "ecom/footer.html" %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Prevents page refresh or redirect
            
            const btn = document.getElementById('submitBtn');
            const formData = new FormData(this);
            
            btn.innerHTML = 'Sending... <i class="fas fa-spinner fa-spin ms-2"></i>';
            btn.disabled = true;

            fetch(window.location.href, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => {
                // Toastify Success Notification
                Toastify({
                    text: "Message Sent Successfully! ðŸš€",
                    duration: 4000,
                    gravity: "top", 
                    position: "center", 
                    backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)",
                    stopOnFocus: true, 
                }).showToast();

                // Reset form and button
                this.reset();
                btn.innerHTML = 'Send Message <i class="fas fa-paper-plane ms-2"></i>';
                btn.disabled = false;
            })
            .catch(error => {
                Toastify({
                    text: "Something went wrong. Please try again.",
                    duration: 3000,
                    gravity: "top",
                    position: "center",
                    backgroundColor: "#ff5f6d",
                }).showToast();
                btn.disabled = false;
            });
        });
    </script>
</body>
</html>